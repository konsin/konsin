---
title: 重学C++
date: 2022-08-18 15:08:28
categories: 学习笔记
tags: C++
---

## 第一章

- C++语言的优点，缺点，和主要用途？
  - 优点：
    - 强大的封装抽象能力，强大的开发工程的能力
    - 高性能，运行快，占用资源少
    - 低功耗，特别适合微型嵌入式
  - 缺点
    - 语法相对复杂、细节较多
    - 需要一些好的规范和范式，否则代码难以维护
  - 主要用途
    - 大型桌面应用程序
    - 大型网站后台
    - 游戏和游戏引擎
    - 视觉库和AI引擎
    - 数据库
    - 自动驾驶系统、嵌入式设备等

- 面向对象和面向过程的优缺点

  面向过程

  - 优点：性能比面向对象高，因为类调用时需要实例化，开销比较大，比较消耗资源;比如单片机、嵌入式开发、Linux/Unix等一般采用面向过程开发，性能是最重要的因素。 
  - 缺点：没有面向对象易维护、易复用、易扩展 

  面向对象

  - 优点：易维护、易复用、易扩展，由于面向对象有封装、继承、多态性的特性，可以设计出低耦合的系统，使系统更加灵活、更加易于维护 
  - 缺点：性能比面向过程低 

## 第二章

### 数据类型

   | 类型               | 位            | 范围                                                         |
   | :----------------- | :------------ | :----------------------------------------------------------- |
   | char               | 1 个字节      | -128 到 127 或者 0 到 255                                    |
   | unsigned char      | 1 个字节      | 0 到 255                                                     |
   | signed char        | 1 个字节      | -128 到 127                                                  |
   | int                | 4 个字节      | -2147483648 到 2147483647                                    |
   | unsigned int       | 4 个字节      | 0 到 4294967295                                              |
   | signed int         | 4 个字节      | -2147483648 到 2147483647                                    |
   | short int          | 2 个字节      | -32768 到 32767                                              |
   | unsigned short int | 2 个字节      | 0 到 65,535                                                  |
   | signed short int   | 2 个字节      | -32768 到 32767                                              |
   | long int           | 8 个字节      | -9,223,372,036,854,775,808 到 9,223,372,036,854,775,807      |
   | signed long int    | 8 个字节      | -9,223,372,036,854,775,808 到 9,223,372,036,854,775,807      |
   | unsigned long int  | 8 个字节      | 0 到 18,446,744,073,709,551,615                              |
   | float              | 4 个字节      | 精度型占4个字节（32位）内存空间，+/- 3.4e +/- 38 (~7 个数字) |
   | double             | 8 个字节      | 双精度型占8 个字节（64位）内存空间，+/- 1.7e +/- 308 (~15 个数字) |
   | long double        | 16 个字节     | 长双精度型 16 个字节（128位）内存空间，可提供18-19位有效数字。 |
   | wchar_t            | 2 或 4 个字节 | 1 个宽字符                                                   |

### 关键字

   | asm          | else      | new              | this     |
   | ------------ | --------- | ---------------- | -------- |
   | auto         | enum      | operator         | throw    |
   | bool         | explicit  | private          | true     |
   | break        | export    | protected        | try      |
   | case         | extern    | public           | typedef  |
   | catch        | false     | register         | typeid   |
   | char         | float     | reinterpret_cast | typename |
   | class        | for       | return           | union    |
   | const        | friend    | short            | unsigned |
   | const_cast   | goto      | signed           | using    |
   | continue     | if        | sizeof           | virtual  |
   | default      | inline    | static           | void     |
   | delete       | int       | static_cast      | volatile |
   | do           | long      | struct           | wchar_t  |
   | double       | mutable   | switch           | while    |
   | dynamic_cast | namespace | template         |          |

### 命名建议：变量名尽量使用“名词”或“形容词+名词”；函数名用“动词+名词”。原则上长度不超过32位

### 常用命名规则

   1. 匈牙利命名法：开头字母用变量类型缩写后面用变量的英文或缩写
   2. Camel命名法：首单词小写，后面单词首字母大写
   3. Pascal命名法：每个单词第一个字母都大写

### 常量与变量

   1. 常量：在程序运行过程中，值一直保持不变的量

      - 定义方法

        - 使用`#define `方式 `#define PI 3.1415`
        - 使用` const`方式 `const double PI = 3.1415`

        使用const定义常量可以在编译时检查出错误。而define只是宏定义，难以排错

      - 常量类型

        - 整数常量：可以是十进制、八进制或十六进制的常量。

        **前缀**指定基数：0x 或 0X 表示十六进制，0 表示八进制，不带前缀则默认表示十进制。

        **后缀**是 U 和 L 的组合，U 表示无符号整数（unsigned），L 表示长整数（long）。

        - 浮点常量

        小数形式表示时，必须包含整数部分、小数部分，或同时包含两者。

        指数形式表示时， 必须包含小数点、指数，或同时包含两者。e后面指定指数

        - 布尔常量
        - 字符常量

        如果常量以 L（仅当大写时）开头，则表示它是一个宽字符常量（例如 L'x'），此时它必须存储在 **wchar_t** 类型的变量中。

## 第三章

**运算符**：告诉编译器执行特定数学或逻辑操作的符号。（算术运算符、关系运算符、逻辑运算符、位运算符、赋值运算符、杂项运算符）

**表达式**：使用运算符将操作数连接而成的式子，每一个表达式都有自己的值，表达式都有运算结果

**注释的建议**：
  1. 好的命名和代码本身就是最好的注释；如果代码本身很清楚，不需要额外加注释。
  2. 在重要代码段、或复杂代码处先写注释再写代码，这样思路更清晰，同时可以保证代码和注释的一致性。
  3. 注释不是越多越好，它是对代码的提示，如果要写就写清楚，并且保证和代码一致。如果更新的代码，清更新相应的注释。

**补码**：
  有符号数另一种计算方式：![image](https://git.poker/konsin/images/blob/main/image.7ka0cc9pftg0.jpg?raw=true)
  常用计算方式：正数不变；复数 符号位不变，其余位取反，最后加1

**大端方式** 数字高位在低地址
**小段方式** 数字低位在低地址

## 第四章
### 数组
概念：代表内存里一组连续的同类型存储区；可以用来把多个存储区合并成一个整体
C语言中数组下标：从0开始，使用非对称区间`[,)`，下届可以取到值，上界取不到值。
   好处：
      1. 取值范围的大小：上界 - 下届；
      2. 如果这个取值范围为空， 上界值 == 下界值
      3. 即使取值范围为空，上界值永远不可能小于下界值。
使用：
  1. 通过下下标可以直接访问任意一个元素
  2. 下标从0开始到元素个数减一为止
  3. 超过范围的下标不可以使用
  4. 数组名称和下标可以表示数组里的元素

优点：
  1. 可以编写循环依次处理数组里的所有元素
  2. 循环变量依次代表所有有效下标

**差一错误**：high - low + 1

### vector数组
`#include <vector>`
引入原因：使用最简单的数组，无法实现动态扩容插入元素，因为容量有限。
- 查询大小：`s.size()`
- 查询容量：`s.capacity()`
- 使用sort对vector排序
  `sort(num.begin(), num.end());`
- 插入数据的方式
  尾插 `push_back(val)`
  尾删 `pop_back()`
  插入 `insert()`
  删除 `erase()`
  清空 `clear()`

### 字符串
**定义方式**：
  `char str[] = {"hello"}`
  `char str[6] = {'h','e','l','l','o'}`
**字符串变量**：
  - 字符串是以空字符('\0')结束的字符数组
  - 空字符 '\0'自动添加到字符串的内部表示中
**字符串常量**：
  - 字符串常量是一对双引号括起来的字符串数组
  - 字符串中每个字符作为一个数组元素存储


**Unicode编码**：目的->把世界上的文字都映射到一套字符空间中
  1. UTF-8：1byte表示字符，可以兼容ASCII码；特点是存储效率高，变长（不方便内部随机访问），无字节序问题（可作为外部编码）
  2. UTF-16：分为UTF-16BE（big endian）、UTF-16LE(little endian)。特点是定长（方便内部随机访问），有字节序问题（不可作为外部编码）
  3. UTF-32：分为UTF-32BE、UTF-32LE。特点是定长（方便内部随机访问），有字节序问题（不可作为外部编码）

**字符串指针**：
  - 指针表示方法： `char* pStr = "hello";`
  - char[] 和 char* 的区别：
    - 地址和地址存储的信息
    - 可变与不可变。
    如果数组指针初始化指向字符串常量，那么这个指针所指内容不可发生改变。
    ``` cpp
    char *ps = "hello";  //字符串常量指针
    char s[] = {"hello"};
    char *ps2 = s;       //字符串变量指针
    ```
    s不可变，s[i]的值可变；
    ps可变，ps[i]的值可不可变取决于所指区间的存储区域是否可变。

**常见操作**：
  `strlen(s)`：返回s的长度
  `strcmp(s1, s2)`: 自左到右按ASCII值大小比较 s1 == s2 返回 0； s1 < s2 返回 -； s1 > s2 返回+；
  `strcpy(s1, s2)`: 复制s2到s1；
  `strncpy(s1, s2, n)` 将字符串s2中前n个字符拷贝到s1中
  `strcat(s1, s2)` 将字符串s2接到s1后面
  `strchr(s1,ch)` 查找ch在s1中第一次出现位置
  `strstr(s1, s2)` 查找s2在s1中第一次出现位置。

### string字符串
`#include <string>`
使用string可以更为方便和安全的管理字符串。
定义：`string s`; `string s = "hello"`; `string s("hello")`; `string s = string("hello")`;
**常用操作**
  - 获取长度：
    - `s.length()` 
    - `s.size()`
    - `s.capacity()` 容量 != 长度
  - 字符串比较：`==` `!=` `>` `>=` `<` `<=`
  - 转换为C风格字符串 char*
    `const char *c_s = s.c_str(); `
  - 可通过下标进行随机访问。
  - 可通过`=`进行字符串拷贝
  - 可通过`+`、`+=`连接字符串

## 第五章 指针
**C++中内存单元内容与地址**
指针的本质：内存划分内存单元用来存放各种类型的数据。计算机对内存单元进行编号，称为内存地址，决定内存单元在内存中的位置。C++编译器让我们通过名字来访问这些内存位置。
指针定义的基本形式： 指针本身就是一个变量，其符合变量定义的基本形式，存储的是值的地址。对类型T，T*是‘到T的指针’类型。通过一个指针访问所指向地址的过程称为间接访问或引用指针。
  小结：
  1. 一个变量有三个重要信息：
     1. 变量的地址位置
     2. 变量所存的信息
     3. 变量的类型
  2. 指针变量是一个专门用来记录变量的地址的变量，通过指针变量可以间接的访问改变另一个变量的值
### C++中原始指针
1. 一般类型指针T*
2. 指针的数组与数组的指针
   指针的数组 T* t[]
   数组的指针 T (*t)[]
3. const pointer 和 pointer to const
   `char const` 和 `const char` 是等价的。
   看const修饰部分：
   - 看左侧最近的部分
   - 如果左侧没有则看右侧
4. 指向指针的指针 
   `*`操作符具有从右向左的结合性 
   `**`表达式相当于`*(*c)`，必须从里向外逐层求值
5. 未初始化和非法的指针
   如果定义到了一个非法地址，程序会出错，从而终止。
   如果定位到一个可以访问的地址，无意修改了它，这种错误难以捕捉，引发的错误可能与原先用于操作的代码完全不相干。
6. NULL指针
   一个特殊的指针，表示不指向任何东西。这种方法来表示特定的指针目前未指向任何东西
   注意事项：
   对应于一个指针如果已经知道被初始化为什么地址，如果不赋值就设置为NULL
   引用指针前先判断是否为NULL

**杜绝野指针**
if等判断对野指针不起作用，因为没有置NULL
一般有三种情况：
  1. 指针变量没有初始化
  2. 已经释放不用的指针没有置NULL，如delete和free之后的指针
  3. 指针操作超越了变量的作用范围。

没有初始化的，不用的或者超出范围的指针把值置为NULL

### 指针的基本运算